---
layout: post
comments: true
title: "tmux 편하게 쓰자"
description: "리눅스 터미널 환경에서 tmux를 편하게 활용해보자."
img: powershell_title.jpg
date: 2023-07-22 18:00:00 +0900
last_modified_at: 2023-07-22 18:00:00 +0900
tags: [command-line, alias, tmux, screen] # add tag
related: command-line
categories: tools
---

리눅스 서버에서 항상 열어둬야 하는 화면들이 있을 때 터미널을 몇개 열어두고 레이아웃을 맞춰놓고 있었는데 불편해서 tmux를 써보기로 한다. 

<!--more-->

## tmux 설치. 

```base
$ sudo yum install tmux
```

모니터링시 여러개의 터미널을 열고 상황을 확인해야 할 때 **tmux**를 쓰면 터미널을 용도에 맞게 분할할 수 있고 세션으로 관리되어 필요할 때 구성 그대로 불러올 수 있다. 첨음에는 명령어모드 전환 및 키 전환이 어려울 수 있는데 한번 익숙해지면 편하게 터미널들을 관리할 수 있다. 

> 기본 명령어는 [How to use tmux](https://www.networkworld.com/article/3545370/how-to-use-tmux-to-create-a-multi-pane-linux-terminal-window.html){:target="_blank"} 를 참고한다. 

오래걸리는 작업을 할 때 tmux 세션에서 실행중인 작업은 계속 유지된다. "Ctrl + b + d" 키를 사용하면 해당 세션에서 빠져나와 원래 터미널로 돌아올 수 있고 다른 작업을 하다가 다시 "tmux attach" 명령어로 다시 세션을 열어볼 수 있다. 

## tmux alias. 

명령어는 복잡하지 않지만 자주쓰는 항목(New, kill, attach)은 alias로 등록해두고 쓴다. 

> tmux-new : 세션 이름을 입력하면 기본 3개의 창으로 분할하여 세션을 만든다.  
> tmux-run : 현재 세션 목록을 보여주고 세션 이름을 입력하면 해당 세션을 실행한다.    
> tmux-del : 현재 세션 목록을 보여주고 세션 이름을 입력하면 해당 세션을 지운다.  

```bash
# tmux new-session with 3 pane 
alias tmux-new='func() { echo -n "INPUT SESSION NAME : "; read SESSION_NAME; tmux new-session -s ${SESSION_NAME} \; split-window -h \; split-window -v \; attach; }; func'
# tmux kill-session 
alias tmux-del='func() { tmux ls; echo -n "INPUT SESSION NAME : "; read SESSION_NAME; tmux kill-session -t ${SESSION_NAME} ; }; func'
# tmux attach-session 
alias tmux-run='func() { tmux ls; echo -n "INPUT SESSION NAME : "; read SESSION_NAME; tmux attach-session -t ${SESSION_NAME} ; }; func'
```

"tmux-new" 명령어를 사용해서 monitor 이름으로 3개의 창으로 분리된 세션을 만든다. 

```bash
$ tmux-new
INPUT SESSION NAME : monitor
```

![tmux-new]({{site.baseurl}}/assets/img/tmux-new.png)

"Ctrl+b d" 키로 Detache 한 후에 "tmux ls" 명령어로 실행하고 있는 세션목록을 확인하고, alias 로 만든 "tmux-run" 명령어를 이용해서 목록을 확인하고 세션이름을 입력해서 세션을 attach 할 수 있다. 

```bash
$ tmux ls
monitor: 1 windows (created Sat Jul 22 19:01:48 2023)
$ tmux-run
monitor: 1 windows (created Sat Jul 22 19:01:48 2023)
INPUT SESSION NAME : monitor
```

## tmux 키 바인딩. 

tmux의 명령어 모드는 "Ctrl + b"이며 아래와 같은 키를 주로 사용한다. 

```
ctrl+b d — 세션 유지하면서 빠져나가기.
ctrl+b % — 세로로 분할.
ctrl+b " — 가로로 분할.
ctrl+b 방향키 — 창 이동.
ctrl+b : - tmux 설정 및 명령어 입력.
```

## 마우스 스크롤링 

"ctrl + b + :" 명령어 입력 모드에서 아래와 같이 입력하면 마우스로 스크롤링을 할 수 있다. 

```bash
set -g mouse on
```

## tmux.conf

tmux 설정은 ~/tmux.conf 파일에 등록해서 사용할 수 있다. 

## 참고

- [introduction tmux](https://www.redhat.com/sysadmin/introduction-tmux-linux){:target="_blank"}  
- [How to use tmux to create a multi-pane Linux terminal window](https://www.networkworld.com/article/3545370/how-to-use-tmux-to-create-a-multi-pane-linux-terminal-window.html){:target="_blank"}  
- [How to Use the ss Command on Linux](https://www.howtogeek.com/681468/how-to-use-the-ss-command-on-linux/){:target="_blank"}  
